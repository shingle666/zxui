<template>
  <div class="watermark-demo">
    <view class="header">
      <text class="title">ZxWatermark æ°´å°ç»„ä»¶æ¼”ç¤º</text>
      <text class="subtitle">åœ¨é¡µé¢ä¸Šæ·»åŠ æ–‡æœ¬æˆ–å›¾ç‰‡ç­‰æ°´å°ä¿¡æ¯</text>
    </view>
    
    <!-- åŸºç¡€ç”¨æ³• -->
    <view class="demo-section">
      <view class="section-title">åŸºç¡€ç”¨æ³•</view>
      <view class="section-desc">é»˜è®¤çš„æ–‡æœ¬æ°´å°</view>
      <view class="demo-wrapper">
        <zx-watermark :font="{ color: isDark ? 'rgba(255, 255, 255, .15)' : 'rgba(0, 0, 0, .15)' }">
          <view class="demo-content">
            <text class="demo-text">æˆ‘ååœ¨æ™¨å…‰ä¸­çš„çª—å‰ï¼Œä¸–ç•Œå¦‚åŒä¸€ä¸ªè¿‡è·¯äººï¼Œåœç•™ç‰‡åˆ»ï¼Œå‘æˆ‘ç‚¹å¤´ç¤ºæ„åç¦»å»ã€‚</text>
            <text class="demo-text">è¿™äº›å¾®å°çš„æ€ç»ªæ˜¯æ ‘å¶çš„æ²™æ²™å£°ï¼Œå®ƒä»¬åœ¨æˆ‘å¿ƒä¸­ä½è¯­ç€æ¬¢ä¹ã€‚</text>
          </view>
        </zx-watermark>
      </view>
    </view>

    <!-- å¤šè¡Œæ°´å° -->
    <view class="demo-section">
      <view class="section-title">å¤šè¡Œæ°´å°</view>
      <view class="section-desc">ä½¿ç”¨æ•°ç»„è®¾ç½®å¤šè¡Œæ–‡æœ¬æ°´å°</view>
      <view class="demo-wrapper">
        <zx-watermark 
          :content="['ZxWatermark', 'Vue3 ç»„ä»¶']"
          :font="{ color: isDark ? 'rgba(255, 255, 255, .15)' : 'rgba(0, 0, 0, .15)' }"
        >
          <view class="demo-content">
            <text class="demo-text">ä½ çœ‹ä¸è§ä½ è‡ªå·±ï¼Œä½ æ‰€çœ‹è§çš„åªæ˜¯ä½ çš„å½±å­ã€‚</text>
            <text class="demo-text">æˆ‘çš„æ„¿æœ›æ˜¯æ„šäººï¼Œå®ƒä»¬åœ¨ä½ çš„æ­Œå£°ä¸­å–§å“—ã€‚è®©æˆ‘åªæ˜¯é™å¬ç€å§ã€‚</text>
          </view>
        </zx-watermark>
      </view>
    </view>

    <!-- å›¾ç‰‡æ°´å° -->
    <view class="demo-section">
      <view class="section-title">å›¾ç‰‡æ°´å°</view>
      <view class="section-desc">ä½¿ç”¨å›¾ç‰‡ä½œä¸ºæ°´å°</view>
      <view class="demo-wrapper">
        <zx-watermark 
          :width="100" 
          :height="40"
          image="https://element-plus.org/images/element-plus-logo.svg"
        >
          <view class="demo-content">
            <text class="demo-text">å¤§æµ·å•Šï¼Œä½ è¯´çš„æ˜¯ä»€ä¹ˆè¯­è¨€ï¼Ÿ</text>
            <text class="demo-text">æ˜¯æ°¸æ’ç–‘é—®çš„è¯­è¨€ã€‚</text>
            <text class="demo-text">å¤©ç©ºå•Šï¼Œä½ å›ç­”çš„æ˜¯ä»€ä¹ˆï¼Ÿ</text>
            <text class="demo-text">æ˜¯æ°¸æ’æ²‰é»˜çš„è¯­è¨€ã€‚</text>
          </view>
        </zx-watermark>
      </view>
    </view>

    <!-- è‡ªå®šä¹‰é…ç½® -->
    <view class="demo-section">
      <view class="section-title">è‡ªå®šä¹‰é…ç½®</view>
      <view class="section-desc">é…ç½®è‡ªå®šä¹‰å‚æ•°é¢„è§ˆæ°´å°æ•ˆæœ</view>
      
      <!-- é…ç½®è¡¨å• -->
      <view class="config-form">
        <view class="form-row">
          <text class="form-label">å†…å®¹:</text>
          <input 
            class="form-input" 
            v-model="config.content" 
            placeholder="è¾“å…¥æ°´å°å†…å®¹"
          />
        </view>
        
        <view class="form-row">
          <text class="form-label">å­—ä½“å¤§å°:</text>
          <slider 
            class="form-slider"
            :value="config.font.fontSize" 
            :min="12" 
            :max="30" 
            :step="1"
            @change="onFontSizeChange"
          />
          <text class="form-value">{{ config.font.fontSize }}px</text>
        </view>
        
        <view class="form-row">
          <text class="form-label">æ—‹è½¬è§’åº¦:</text>
          <slider 
            class="form-slider"
            :value="config.rotate" 
            :min="-180" 
            :max="180" 
            :step="1"
            @change="onRotateChange"
          />
          <text class="form-value">{{ config.rotate }}Â°</text>
        </view>
        
        <view class="form-row">
          <text class="form-label">æ°´å¹³é—´è·:</text>
          <slider 
            class="form-slider"
            :value="config.gap[0]" 
            :min="50" 
            :max="200" 
            :step="10"
            @change="onGapXChange"
          />
          <text class="form-value">{{ config.gap[0] }}px</text>
        </view>
        
        <view class="form-row">
          <text class="form-label">å‚ç›´é—´è·:</text>
          <slider 
            class="form-slider"
            :value="config.gap[1]" 
            :min="50" 
            :max="200" 
            :step="10"
            @change="onGapYChange"
          />
          <text class="form-value">{{ config.gap[1] }}px</text>
        </view>
        
        <view class="form-row">
          <text class="form-label">é€æ˜åº¦:</text>
          <slider 
            class="form-slider"
            :value="opacity" 
            :min="0.1" 
            :max="1" 
            :step="0.1"
            @change="onOpacitySliderChange"
          />
          <text class="form-value">{{ Math.round(opacity * 100) }}%</text>
        </view>
      </view>
      
      <!-- é¢„è§ˆåŒºåŸŸ -->
      <view class="demo-wrapper">
        <zx-watermark 
          :content="config.content"
          :font="config.font"
          :rotate="config.rotate"
          :gap="config.gap"
          :offset="config.offset"
        >
          <view class="demo-content custom-demo">
            <view class="demo-card">
              <text class="card-title">ZxWatermark</text>
              <text class="card-subtitle">Vue 3 æ°´å°ç»„ä»¶</text>
              <view class="card-content">
                <text class="card-text">âœ¨ æ”¯æŒæ–‡æœ¬å’Œå›¾ç‰‡æ°´å°</text>
                <text class="card-text">ğŸ¨ æ”¯æŒè‡ªå®šä¹‰æ ·å¼é…ç½®</text>
                <text class="card-text">ğŸ”’ æ”¯æŒé˜²åˆ é™¤ä¿æŠ¤</text>
                <text class="card-text">ğŸ“± æ”¯æŒå“åº”å¼è®¾è®¡</text>
              </view>
            </view>
          </view>
        </zx-watermark>
      </view>
    </view>

    <!-- ä¸åŒæ ·å¼æ¼”ç¤º -->
    <view class="demo-section">
      <view class="section-title">ä¸åŒæ ·å¼æ¼”ç¤º</view>
      
      <!-- çº¢è‰²æ°´å° -->
      <view class="style-demo">
        <view class="style-title">çº¢è‰²è­¦å‘Šæ°´å°</view>
        <zx-watermark 
          content="æœºå¯†æ–‡æ¡£"
          :font="{ color: 'rgba(255, 0, 0, 0.2)', fontSize: 20, fontWeight: 'bold' }"
          :rotate="-30"
          :gap="[120, 80]"
        >
          <view class="demo-content">
            <text class="demo-text">è¿™æ˜¯ä¸€ä»½é‡è¦çš„æœºå¯†æ–‡æ¡£ï¼Œè¯·å¦¥å–„ä¿ç®¡ã€‚</text>
          </view>
        </zx-watermark>
      </view>
      
      <!-- è“è‰²å“ç‰Œæ°´å° -->
      <view class="style-demo">
        <view class="style-title">è“è‰²å“ç‰Œæ°´å°</view>
        <zx-watermark 
          content="å“ç‰Œä¿æŠ¤"
          :font="{ color: 'rgba(64, 158, 255, 0.15)', fontSize: 18 }"
          :rotate="-15"
          :gap="[100, 100]"
        >
          <view class="demo-content">
            <text class="demo-text">è¿™é‡Œå±•ç¤ºå“ç‰Œç›¸å…³çš„å†…å®¹ï¼Œæ°´å°ç”¨äºå“ç‰Œä¿æŠ¤ã€‚</text>
          </view>
        </zx-watermark>
      </view>
      
      <!-- ç»¿è‰²æˆåŠŸæ°´å° -->
      <view class="style-demo">
        <view class="style-title">ç»¿è‰²è®¤è¯æ°´å°</view>
        <zx-watermark 
          content="å·²è®¤è¯"
          :font="{ color: 'rgba(103, 194, 58, 0.2)', fontSize: 16, fontWeight: '600' }"
          :rotate="0"
          :gap="[150, 120]"
        >
          <view class="demo-content">
            <text class="demo-text">æ­¤å†…å®¹å·²é€šè¿‡è®¤è¯ï¼Œå…·æœ‰å®˜æ–¹æƒå¨æ€§ã€‚</text>
          </view>
        </zx-watermark>
      </view>
    </view>

    <!-- ä½¿ç”¨è¯´æ˜ -->
    <view class="demo-section">
      <view class="section-title">ä½¿ç”¨è¯´æ˜</view>
      <view class="usage-info">
        <view class="info-item">
          <text class="info-label">ğŸ¯ åŸºç¡€ç”¨æ³•:</text>
          <text class="info-text">ç›´æ¥ä½¿ç”¨ç»„ä»¶åŒ…è£¹å†…å®¹å³å¯æ·»åŠ é»˜è®¤æ°´å°</text>
        </view>
        <view class="info-item">
          <text class="info-label">ğŸ“ æ–‡æœ¬æ°´å°:</text>
          <text class="info-text">é€šè¿‡ content å±æ€§è®¾ç½®æ–‡æœ¬å†…å®¹ï¼Œæ”¯æŒå­—ç¬¦ä¸²æˆ–æ•°ç»„</text>
        </view>
        <view class="info-item">
          <text class="info-label">ğŸ–¼ï¸ å›¾ç‰‡æ°´å°:</text>
          <text class="info-text">é€šè¿‡ image å±æ€§è®¾ç½®å›¾ç‰‡URLï¼Œå»ºè®®ä½¿ç”¨2xæˆ–3xå›¾ç‰‡</text>
        </view>
        <view class="info-item">
          <text class="info-label">ğŸ¨ æ ·å¼å®šåˆ¶:</text>
          <text class="info-text">é€šè¿‡ font å¯¹è±¡é…ç½®å­—ä½“æ ·å¼ï¼ŒåŒ…æ‹¬é¢œè‰²ã€å¤§å°ã€å­—é‡ç­‰</text>
        </view>
        <view class="info-item">
          <text class="info-label">ğŸ“ å¸ƒå±€æ§åˆ¶:</text>
          <text class="info-text">é€šè¿‡ gapã€offsetã€rotate ç­‰å±æ€§æ§åˆ¶æ°´å°å¸ƒå±€</text>
        </view>
        <view class="info-item">
          <text class="info-label">ğŸ”’ é˜²åˆ é™¤:</text>
          <text class="info-text">ç»„ä»¶å†…ç½®é˜²åˆ é™¤æœºåˆ¶ï¼Œä¿æŠ¤æ°´å°ä¸è¢«æ¶æ„ç¯¡æ”¹</text>
        </view>
      </view>
    </view>
  </div>
</template>

<script setup>
import { ref, reactive, computed, watch } from 'vue'
import ZxWatermark from '../../../components/zx-watermark/zx-watermark.vue'

defineOptions({
  name: 'ZxWatermarkDemo'
})

// å“åº”å¼æ•°æ®
const isDark = ref(false) // è¿™é‡Œå¯ä»¥æ¥å…¥ä¸»é¢˜åˆ‡æ¢é€»è¾‘
const opacity = ref(0.15)

const config = reactive({
  content: 'ZxWatermark',
  font: {
    fontSize: 16,
    color: 'rgba(0, 0, 0, 0.15)',
    fontWeight: 'normal'
  },
  rotate: -22,
  gap: [100, 100],
  offset: []
})

// æ–¹æ³•
const onFontSizeChange = (e) => {
  config.font.fontSize = e.detail.value
}

const onRotateChange = (e) => {
  config.rotate = e.detail.value
}

const onGapXChange = (e) => {
  config.gap[0] = e.detail.value
}

const onGapYChange = (e) => {
  config.gap[1] = e.detail.value
}

const onOpacitySliderChange = (e) => {
  opacity.value = e.detail.value
}

const onOpacityChange = () => {
  const newOpacity = opacity.value
  // æ›´æ–°å­—ä½“é¢œè‰²çš„é€æ˜åº¦
  if (isDark.value) {
    config.font.color = `rgba(255, 255, 255, ${newOpacity})`
  } else {
    config.font.color = `rgba(0, 0, 0, ${newOpacity})`
  }
}

// ç›‘å¬é€æ˜åº¦å˜åŒ–
watch(() => opacity.value, onOpacityChange, { immediate: true })
</script>

<style lang="scss" scoped>
.watermark-demo {
  min-height: 100vh;
  background: #f5f7fa;
  padding: 20rpx;
}

.header {
  text-align: center;
  margin-bottom: 60rpx;
  padding: 40rpx 20rpx;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 20rpx;
  color: white;
  
  .title {
    display: block;
    font-size: 48rpx;
    font-weight: 600;
    margin-bottom: 20rpx;
  }
  
  .subtitle {
    display: block;
    font-size: 28rpx;
    opacity: 0.9;
  }
}

.demo-section {
  margin-bottom: 60rpx;
  background: white;
  border-radius: 20rpx;
  padding: 40rpx;
  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.05);
}

.section-title {
  font-size: 36rpx;
  font-weight: 600;
  color: #2c3e50;
  margin-bottom: 20rpx;
  padding-bottom: 20rpx;
  border-bottom: 4rpx solid #409eff;
  display: inline-block;
}

.section-desc {
  font-size: 28rpx;
  color: #666;
  margin-bottom: 40rpx;
}

.demo-wrapper {
  border: 2rpx solid #e4e7ed;
  border-radius: 16rpx;
  overflow: hidden;
  background: #fafbfc;
}

.demo-content {
  min-height: 400rpx;
  padding: 40rpx;
  display: flex;
  flex-direction: column;
  justify-content: center;
  background: white;
}

.demo-text {
  display: block;
  font-size: 30rpx;
  line-height: 1.8;
  color: #333;
  margin-bottom: 20rpx;
  
  &:last-child {
    margin-bottom: 0;
  }
}

.custom-demo {
  min-height: 500rpx;
}

.demo-card {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  padding: 40rpx;
  border-radius: 20rpx;
  color: white;
  text-align: center;
}

.card-title {
  display: block;
  font-size: 40rpx;
  font-weight: 600;
  margin-bottom: 15rpx;
}

.card-subtitle {
  display: block;
  font-size: 28rpx;
  opacity: 0.9;
  margin-bottom: 30rpx;
}

.card-content {
  .card-text {
    display: block;
    font-size: 26rpx;
    margin-bottom: 15rpx;
    text-align: left;
    
    &:last-child {
      margin-bottom: 0;
    }
  }
}

.config-form {
  background: #f8f9fb;
  padding: 30rpx;
  border-radius: 16rpx;
  margin-bottom: 40rpx;
}

.form-row {
  display: flex;
  align-items: center;
  margin-bottom: 30rpx;
  
  &:last-child {
    margin-bottom: 0;
  }
}

.form-label {
  width: 160rpx;
  font-size: 28rpx;
  color: #333;
  font-weight: 500;
}

.form-input {
  flex: 1;
  height: 70rpx;
  padding: 0 20rpx;
  background: white;
  border: 2rpx solid #e4e7ed;
  border-radius: 8rpx;
  font-size: 28rpx;
  color: #333;
}

.form-slider {
  flex: 1;
  margin: 0 20rpx;
}

.form-value {
  width: 120rpx;
  font-size: 26rpx;
  color: #666;
  text-align: right;
}

.style-demo {
  margin-bottom: 40rpx;
  
  &:last-child {
    margin-bottom: 0;
  }
}

.style-title {
  font-size: 32rpx;
  font-weight: 500;
  color: #333;
  margin-bottom: 20rpx;
  padding-left: 20rpx;
  border-left: 6rpx solid #409eff;
}

.usage-info {
  .info-item {
    padding: 25rpx 0;
    border-bottom: 1rpx solid #f0f0f0;
    
    &:last-child {
      border-bottom: none;
    }
  }
  
  .info-label {
    display: block;
    font-size: 30rpx;
    font-weight: 500;
    color: #333;
    margin-bottom: 10rpx;
  }
  
  .info-text {
    display: block;
    font-size: 28rpx;
    color: #666;
    line-height: 1.6;
  }
}

// å“åº”å¼è®¾è®¡
@media (max-width: 750rpx) {
  .watermark-demo {
    padding: 15rpx;
  }
  
  .header {
    padding: 30rpx 20rpx;
    
    .title {
      font-size: 40rpx;
    }
    
    .subtitle {
      font-size: 24rpx;
    }
  }
  
  .demo-section {
    padding: 30rpx;
  }
  
  .section-title {
    font-size: 32rpx;
  }
  
  .form-row {
    flex-direction: column;
    align-items: flex-start;
    
    .form-label {
      width: 100%;
      margin-bottom: 15rpx;
    }
    
    .form-input,
    .form-slider {
      width: 100%;
      margin: 0;
    }
    
    .form-value {
      width: 100%;
      text-align: left;
      margin-top: 10rpx;
    }
  }
}
</style> 