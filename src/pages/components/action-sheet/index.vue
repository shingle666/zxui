<template>
  <view class="container">
    <view class="title">
      <text>åŠ¨ä½œé¢æ¿ç¤ºä¾‹</text>
    </view>
    
    <!-- åŸºç¡€ç”¨æ³• -->
    <view class="section">
      <view class="section-title">åŸºç¡€ç”¨æ³•</view>
      <view class="button" @tap="openBasic">
        <text class="button-text">æ‰“å¼€åŸºç¡€åŠ¨ä½œé¢æ¿</text>
      </view>
      <zx-action-sheet 
        v-model:show="showBasic" 
        :items="basicItems"
        tips="è¿™æ˜¯ä¸€ä¸ªåŸºç¡€åŠ¨ä½œé¢æ¿"
        @change="handleChange"
        @cancel="handleCancel"
      />
    </view>
    
    <!-- æš—è‰²ä¸»é¢˜ -->
    <view class="section">
      <view class="section-title">æš—è‰²ä¸»é¢˜</view>
      <view class="button" @tap="openDark">
        <text class="button-text">æ‰“å¼€æš—è‰²ä¸»é¢˜åŠ¨ä½œé¢æ¿</text>
      </view>
      <zx-action-sheet 
        v-model:show="showDark" 
        :items="darkItems"
        tips="æš—è‰²ä¸»é¢˜åŠ¨ä½œé¢æ¿"
        theme="dark"
        @change="handleChange"
      />
    </view>
    
    <!-- å¸¦å›¾æ ‡å’Œå¾½æ ‡ -->
    <view class="section">
      <view class="section-title">å¸¦å›¾æ ‡å’Œå¾½æ ‡</view>
      <view class="button" @tap="openWithIcons">
        <text class="button-text">æ‰“å¼€å¸¦å›¾æ ‡çš„åŠ¨ä½œé¢æ¿</text>
      </view>
      <zx-action-sheet 
        v-model:show="showWithIcons" 
        :items="iconItems"
        @change="handleChange"
      />
    </view>
    
    <!-- ç¦ç”¨é¡¹ -->
    <view class="section">
      <view class="section-title">ç¦ç”¨é¡¹</view>
      <view class="button" @tap="openWithDisabled">
        <text class="button-text">æ‰“å¼€å¸¦ç¦ç”¨é¡¹çš„åŠ¨ä½œé¢æ¿</text>
      </view>
      <zx-action-sheet 
        v-model:show="showWithDisabled" 
        :items="disabledItems"
        @change="handleChange"
      />
    </view>
    
    <!-- ä¸è‡ªåŠ¨å…³é—­ -->
    <view class="section">
      <view class="section-title">ç‚¹å‡»é¡¹ä¸è‡ªåŠ¨å…³é—­</view>
      <view class="button" @tap="openNoAutoClose">
        <text class="button-text">æ‰“å¼€ä¸è‡ªåŠ¨å…³é—­çš„åŠ¨ä½œé¢æ¿</text>
      </view>
      <zx-action-sheet 
        v-model:show="showNoAutoClose" 
        :items="basicItems"
        :close-on-item-click="false"
        @change="handleNoAutoCloseChange"
      />
    </view>
    
    <!-- è‡ªå®šä¹‰æ ·å¼ -->
    <view class="section">
      <view class="section-title">è‡ªå®šä¹‰æ ·å¼</view>
      <view class="button" @tap="openCustomStyle">
        <text class="button-text">æ‰“å¼€è‡ªå®šä¹‰æ ·å¼çš„åŠ¨ä½œé¢æ¿</text>
      </view>
      <zx-action-sheet 
        v-model:show="showCustomStyle" 
        :items="customItems"
        :custom-style="{ boxShadow: '0 -5rpx 20rpx rgba(0, 0, 0, 0.1)' }"
        mask-color="rgba(0, 0, 0, 0.3)"
        :item-font-size="30"
        @change="handleChange"
      />
    </view>
    
    <!-- ä½¿ç”¨æ’æ§½ -->
    <view class="section">
      <view class="section-title">ä½¿ç”¨æ’æ§½</view>
      <view class="button" @tap="openWithSlots">
        <text class="button-text">æ‰“å¼€ä½¿ç”¨æ’æ§½çš„åŠ¨ä½œé¢æ¿</text>
      </view>
      <zx-action-sheet 
        v-model:show="showWithSlots" 
        :items="basicItems"
      >
        <template #tips>
          <view class="custom-tips">
            <text class="custom-tips-title">è‡ªå®šä¹‰æç¤º</text>
            <text class="custom-tips-desc">è¿™æ˜¯ä¸€ä¸ªé€šè¿‡æ’æ§½è‡ªå®šä¹‰çš„æç¤ºå†…å®¹</text>
          </view>
        </template>
        <template #cancel-button>
          <view class="custom-cancel">
            <text class="custom-cancel-text">å…³é—­é¢æ¿</text>
          </view>
        </template>
      </zx-action-sheet>
    </view>
  </view>
</template>

<script setup>
import { ref } from 'vue';

// åŸºç¡€ç”¨æ³•
const showBasic = ref(false);
const basicItems = ref([
  { text: 'é€‰é¡¹ä¸€' },
  { text: 'é€‰é¡¹äºŒ' },
  { text: 'é€‰é¡¹ä¸‰' }
]);

// æš—è‰²ä¸»é¢˜
const showDark = ref(false);
const darkItems = ref([
  { text: 'é€‰é¡¹ä¸€', color: '#ffffff' },
  { text: 'é€‰é¡¹äºŒ', color: '#ffffff' },
  { text: 'é€‰é¡¹ä¸‰', color: '#ff5722' }
]);

// å¸¦å›¾æ ‡å’Œå¾½æ ‡
const showWithIcons = ref(false);
const iconItems = ref([
  { text: 'æ‹ç…§', icon: 'camera' },
  { text: 'ç›¸å†Œé€‰æ‹©', icon: 'image' },
  { text: 'æ–‡ä»¶', icon: 'file', badge: '5' },
  { text: 'æ”¶è—', icon: 'star' }
]);

// ç¦ç”¨é¡¹
const showWithDisabled = ref(false);
const disabledItems = ref([
  { text: 'é€‰é¡¹ä¸€' },
  { text: 'é€‰é¡¹äºŒ', disabled: true },
  { text: 'é€‰é¡¹ä¸‰' }
]);

// ä¸è‡ªåŠ¨å…³é—­
const showNoAutoClose = ref(false);

// è‡ªå®šä¹‰æ ·å¼
const showCustomStyle = ref(false);
const customItems = ref([
  { text: 'åˆ é™¤', color: '#ff5722' },
  { text: 'ä¿®æ”¹', color: '#2196F3' },
  { text: 'æŸ¥çœ‹è¯¦æƒ…', fontSize: '28rpx' }
]);

// ä½¿ç”¨æ’æ§½
const showWithSlots = ref(false);

// æ‰“å¼€ä¸åŒçš„åŠ¨ä½œé¢æ¿
const openBasic = () => {
  showBasic.value = true;
};

const openDark = () => {
  showDark.value = true;
};

const openWithIcons = () => {
  showWithIcons.value = true;
};

const openWithDisabled = () => {
  showWithDisabled.value = true;
};

const openNoAutoClose = () => {
  showNoAutoClose.value = true;
};

const openCustomStyle = () => {
  showCustomStyle.value = true;
};

const openWithSlots = () => {
  showWithSlots.value = true;
};

// å¤„ç†ç‚¹å‡»äº‹ä»¶
const handleChange = (item) => {
  uni.showToast({
    title: `ç‚¹å‡»äº†: ${item.text}`,
    icon: 'none'
  });
};

const handleCancel = () => {
  uni.showToast({
    title: 'ç‚¹å‡»äº†å–æ¶ˆ',
    icon: 'none'
  });
};

const handleNoAutoCloseChange = (item) => {
  uni.showToast({
    title: `ç‚¹å‡»äº†: ${item.text}ï¼Œä¸ä¼šè‡ªåŠ¨å…³é—­`,
    icon: 'none'
  });
  
  // 3ç§’åæ‰‹åŠ¨å…³é—­
  setTimeout(() => {
    showNoAutoClose.value = false;
  }, 3000);
};
</script>

<style lang="scss">
.container {
  padding: 20rpx;
}

.title {
  font-size: 40rpx;
  font-weight: bold;
  margin-bottom: 40rpx;
  text-align: center;
}

.section {
  margin-bottom: 40rpx;
}

.section-title {
  font-size: 32rpx;
  font-weight: bold;
  margin-bottom: 20rpx;
  padding-left: 20rpx;
  border-left: 8rpx solid #007aff;
}

.button {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 80rpx;
  background-color: #007aff;
  border-radius: 8rpx;
}

.button-text {
  color: #ffffff;
  font-size: 28rpx;
}

/* è‡ªå®šä¹‰æ’æ§½æ ·å¼ */
.custom-tips {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.custom-tips-title {
  font-size: 32rpx;
  font-weight: bold;
  margin-bottom: 10rpx;
}

.custom-tips-desc {
  font-size: 26rpx;
  color: #666;
}

.custom-cancel {
  display: flex;
  justify-content: center;
  align-items: center;
}

.custom-cancel-text {
  font-size: 32rpx;
  color: #007aff;
}

/* ä¸ºç»„ä»¶æ³¨å…¥çš„å›¾æ ‡æ ·å¼ */
.icon-camera::before {
  content: "ğŸ“·";
}

.icon-image::before {
  content: "ğŸ–¼ï¸";
}

.icon-file::before {
  content: "ğŸ“";
}

.icon-star::before {
  content: "â­";
}
</style> 