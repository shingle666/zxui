<template>
	<view class="example-container">
		<view class="header">
			<view class="title">zx-textarea ç»„ä»¶ç¤ºä¾‹</view>
			<view class="subtitle">åŸºäº uni-app å®˜æ–¹ textarea ç»„ä»¶å°è£…çš„å¢å¼ºå‹æ–‡æœ¬åŸŸç»„ä»¶</view>
		</view>
		
		<!-- åŸºç¡€ç”¨æ³• -->
		<view class="section">
			<view class="section-title">
				<text class="title-text">åŸºç¡€ç”¨æ³•</text>
				<text class="title-desc">æ”¯æŒ v-model åŒå‘æ•°æ®ç»‘å®š</text>
			</view>
			<zx-textarea 
				v-model="basicValue" 
				placeholder="è¯·è¾“å…¥å†…å®¹"
				@input="onBasicInput"
				@change="onBasicChange"
			/>
			<view class="result-box">
				<text class="result-label">è¾“å…¥å€¼ï¼š</text>
				<text class="result-value">{{ basicValue || 'æš‚æ— è¾“å…¥' }}</text>
			</view>
		</view>
		
		<!-- å¸¦å­—æ•°ç»Ÿè®¡ -->
		<view class="section">
			<view class="section-title">
				<text class="title-text">å­—æ•°ç»Ÿè®¡</text>
				<text class="title-desc">æ˜¾ç¤ºå½“å‰å­—æ•°å’Œæœ€å¤§é™åˆ¶</text>
			</view>
			<zx-textarea 
				v-model="countValue" 
				placeholder="æœ€å¤šè¾“å…¥100ä¸ªå­—ç¬¦"
				:count="true"
				:maxlength="100"
			/>
		</view>
		
		<!-- æ¸…é™¤æŒ‰é’® -->
		<view class="section">
			<view class="section-title">
				<text class="title-text">æ¸…é™¤æŒ‰é’®</text>
				<text class="title-desc">æ”¯æŒä¸€é”®æ¸…ç©ºè¾“å…¥å†…å®¹</text>
			</view>
			<zx-textarea 
				v-model="clearableValue" 
				placeholder="å¸¦æ¸…é™¤æŒ‰é’®çš„è¾“å…¥æ¡†"
				:clearable="true"
				@clear="onClear"
			/>
		</view>
		
		<!-- è‡ªé€‚åº”é«˜åº¦ -->
		<view class="section">
			<view class="section-title">
				<text class="title-text">è‡ªé€‚åº”é«˜åº¦</text>
				<text class="title-desc">è¾“å…¥åŒºåŸŸé«˜åº¦è‡ªé€‚åº”ï¼Œä¸ä¼šå‡ºç°æ»šåŠ¨æ¡</text>
			</view>
			<zx-textarea 
				v-model="autoHeightValue" 
				placeholder="è¾“å…¥åŒºåŸŸé«˜åº¦è‡ªé€‚åº”ï¼Œè¯•è¯•è¾“å…¥å¤šè¡Œå†…å®¹"
				:auto-height="true"
			/>
		</view>
		
		<!-- ç¦ç”¨çŠ¶æ€ -->
		<view class="section">
			<view class="section-title">
				<text class="title-text">ç¦ç”¨çŠ¶æ€</text>
				<text class="title-desc">ä¸å¯ç¼–è¾‘çš„ç¦ç”¨çŠ¶æ€</text>
			</view>
			<zx-textarea 
				v-model="disabledValue" 
				placeholder="ç¦ç”¨çŠ¶æ€"
				:disabled="true"
			/>
		</view>
		
		<!-- ä¸åŒè¾¹æ¡†æ ·å¼ -->
		<view class="section">
			<view class="section-title">
				<text class="title-text">è¾¹æ¡†æ ·å¼</text>
				<text class="title-desc">æ”¯æŒå››å‘¨è¾¹æ¡†ã€åº•éƒ¨è¾¹æ¡†ã€æ— è¾¹æ¡†ä¸‰ç§æ ·å¼</text>
			</view>
			<view class="border-examples">
				<view class="border-item">
					<text class="border-label">å››å‘¨è¾¹æ¡† (surround)</text>
					<zx-textarea 
						v-model="borderValue1" 
						placeholder="å››å‘¨è¾¹æ¡†æ ·å¼"
						border="surround"
					/>
				</view>
				<view class="border-item">
					<text class="border-label">åº•éƒ¨è¾¹æ¡† (bottom)</text>
					<zx-textarea 
						v-model="borderValue2" 
						placeholder="åº•éƒ¨è¾¹æ¡†æ ·å¼"
						border="bottom"
					/>
				</view>
				<view class="border-item">
					<text class="border-label">æ— è¾¹æ¡† (none)</text>
					<zx-textarea 
						v-model="borderValue3" 
						placeholder="æ— è¾¹æ¡†æ ·å¼"
						border="none"
						background-color="#f8f9fa"
					/>
				</view>
			</view>
		</view>
		
		<!-- è‡ªå®šä¹‰æ ·å¼ -->
		<view class="section">
			<view class="section-title">
				<text class="title-text">è‡ªå®šä¹‰æ ·å¼</text>
				<text class="title-desc">æ”¯æŒè‡ªå®šä¹‰å­—ä½“å¤§å°ã€é¢œè‰²ã€èƒŒæ™¯è‰²ç­‰æ ·å¼</text>
			</view>
			<zx-textarea 
				v-model="customValue" 
				placeholder="è‡ªå®šä¹‰æ ·å¼çš„è¾“å…¥æ¡†"
				:count="true"
				:maxlength="200"
				font-size="16px"
				color="#333"
				background-color="#f8f9fa"
				border-color="#007bff"
				border-radius="8px"
				padding="12px"
			/>
		</view>
		
		<!-- ä¸åŒè¾“å…¥æ¨¡å¼ -->
		<view class="section">
			<view class="section-title">
				<text class="title-text">è¾“å…¥æ¨¡å¼</text>
				<text class="title-desc">æ”¯æŒä¸åŒçš„è™šæ‹Ÿé”®ç›˜è¾“å…¥æ¨¡å¼</text>
			</view>
			<view class="input-mode-examples">
				<view class="mode-item">
					<text class="mode-label">æ•°å­—è¾“å…¥ (numeric)</text>
					<zx-textarea 
						v-model="numericValue" 
						placeholder="æ•°å­—è¾“å…¥æ¨¡å¼"
						inputmode="numeric"
						height="80rpx"
					/>
				</view>
				<view class="mode-item">
					<text class="mode-label">é‚®ç®±è¾“å…¥ (email)</text>
					<zx-textarea 
						v-model="emailValue" 
						placeholder="é‚®ç®±è¾“å…¥æ¨¡å¼"
						inputmode="email"
						height="80rpx"
					/>
				</view>
				<view class="mode-item">
					<text class="mode-label">æœç´¢è¾“å…¥ (search)</text>
					<zx-textarea 
						v-model="searchValue" 
						placeholder="æœç´¢è¾“å…¥æ¨¡å¼"
						inputmode="search"
						height="80rpx"
					/>
				</view>
			</view>
		</view>
		
		<!-- é”®ç›˜ç¡®è®¤æŒ‰é’®ç±»å‹ -->
		<view class="section">
			<view class="section-title">
				<text class="title-text">é”®ç›˜ç¡®è®¤æŒ‰é’®</text>
				<text class="title-desc">è‡ªå®šä¹‰é”®ç›˜å³ä¸‹è§’æŒ‰é’®çš„æ–‡å­—</text>
			</view>
			<view class="confirm-examples">
				<view class="confirm-item">
					<text class="confirm-label">å‘é€ (send)</text>
					<zx-textarea 
						v-model="sendValue" 
						placeholder="ç¡®è®¤æŒ‰é’®æ˜¾ç¤ºï¼šå‘é€"
						confirm-type="send"
						height="80rpx"
						@confirm="onConfirm"
					/>
				</view>
				<view class="confirm-item">
					<text class="confirm-label">æœç´¢ (search)</text>
					<zx-textarea 
						v-model="searchConfirmValue" 
						placeholder="ç¡®è®¤æŒ‰é’®æ˜¾ç¤ºï¼šæœç´¢"
						confirm-type="search"
						height="80rpx"
						@confirm="onConfirm"
					/>
				</view>
				<view class="confirm-item">
					<text class="confirm-label">ä¸‹ä¸€ä¸ª (next)</text>
					<zx-textarea 
						v-model="nextValue" 
						placeholder="ç¡®è®¤æŒ‰é’®æ˜¾ç¤ºï¼šä¸‹ä¸€ä¸ª"
						confirm-type="next"
						height="80rpx"
						@confirm="onConfirm"
					/>
				</view>
			</view>
		</view>
		
		<!-- è‡ªå®šä¹‰å ä½ç¬¦æ ·å¼ -->
		<view class="section">
			<view class="section-title">
				<text class="title-text">å ä½ç¬¦æ ·å¼</text>
				<text class="title-desc">è‡ªå®šä¹‰å ä½ç¬¦çš„é¢œè‰²å’Œæ ·å¼</text>
			</view>
			<view class="placeholder-examples">
				<view class="placeholder-item">
					<text class="placeholder-label">çº¢è‰²å ä½ç¬¦</text>
					<zx-textarea 
						v-model="placeholderValue1" 
						placeholder="çº¢è‰²å ä½ç¬¦æ–‡å­—"
						placeholder-style="color: #f56c6c; font-style: italic;"
						height="80rpx"
					/>
				</view>
				<view class="placeholder-item">
					<text class="placeholder-label">è“è‰²å ä½ç¬¦</text>
					<zx-textarea 
						v-model="placeholderValue2" 
						placeholder="è“è‰²å ä½ç¬¦æ–‡å­—"
						placeholder-style="color: #409eff; font-weight: bold;"
						height="80rpx"
					/>
				</view>
			</view>
		</view>
		
		<!-- äº‹ä»¶å¤„ç†æ¼”ç¤º -->
		<view class="section">
			<view class="section-title">
				<text class="title-text">äº‹ä»¶å¤„ç†</text>
				<text class="title-desc">æ¼”ç¤ºå„ç§äº‹ä»¶çš„è§¦å‘å’Œå¤„ç†</text>
			</view>
			<zx-textarea 
				v-model="eventValue" 
				placeholder="åœ¨è¿™é‡Œæµ‹è¯•å„ç§äº‹ä»¶ï¼ˆèšç„¦ã€å¤±ç„¦ã€è¾“å…¥ã€æ¸…é™¤ç­‰ï¼‰"
				:count="true"
				:clearable="true"
				:maxlength="300"
				@focus="onFocus"
				@blur="onBlur"
				@input="onInputEvent"
				@change="onChangeEvent"
				@confirm="onConfirmEvent"
				@clear="onClearEvent"
			/>
			<view class="event-log">
				<view class="log-header">
					<text class="log-title">äº‹ä»¶æ—¥å¿—</text>
					<text class="log-clear" @tap="clearEventLog">æ¸…ç©ºæ—¥å¿—</text>
				</view>
				<scroll-view class="log-content" scroll-y="true">
					<text 
						v-for="(log, index) in eventLogs" 
						:key="index" 
						class="log-item"
					>
						{{ log }}
					</text>
					<text v-if="eventLogs.length === 0" class="log-empty">æš‚æ— äº‹ä»¶æ—¥å¿—</text>
				</scroll-view>
			</view>
		</view>
		
		<!-- ç»¼åˆç¤ºä¾‹ -->
		<view class="section">
			<view class="section-title">
				<text class="title-text">ç»¼åˆç¤ºä¾‹</text>
				<text class="title-desc">é›†æˆå¤šç§åŠŸèƒ½çš„ç»¼åˆæ¼”ç¤º</text>
			</view>
			<zx-textarea 
				v-model="comprehensiveValue" 
				placeholder="è¿™æ˜¯ä¸€ä¸ªé›†æˆäº†å¤šç§åŠŸèƒ½çš„ç»¼åˆç¤ºä¾‹"
				:count="true"
				:clearable="true"
				:maxlength="500"
				:auto-height="true"
				font-size="16px"
				color="#2c3e50"
				background-color="#ecf0f1"
				border-color="#3498db"
				border-radius="10px"
				padding="15px"
				confirm-type="done"
				@input="onComprehensiveInput"
				@change="onComprehensiveChange"
				@clear="onComprehensiveClear"
			/>
			<view class="comprehensive-info">
				<text class="info-item">å½“å‰å­—æ•°ï¼š{{ comprehensiveValue.length }}</text>
				<text class="info-item">å‰©ä½™å­—æ•°ï¼š{{ 500 - comprehensiveValue.length }}</text>
			</view>
		</view>
	</view>
</template>

<script setup>
import { ref } from 'vue';

// åŸºç¡€ç”¨æ³•
const basicValue = ref('');

// å­—æ•°ç»Ÿè®¡
const countValue = ref('è¿™æ˜¯ä¸€ä¸ªå¸¦å­—æ•°ç»Ÿè®¡çš„ç¤ºä¾‹');

// æ¸…é™¤æŒ‰é’®
const clearableValue = ref('Hello World! ç‚¹å‡»å³ä¾§æ¸…é™¤æŒ‰é’®å¯ä»¥æ¸…ç©ºå†…å®¹');

// è‡ªé€‚åº”é«˜åº¦
const autoHeightValue = ref('è¿™æ˜¯è‡ªé€‚åº”é«˜åº¦çš„ç¤ºä¾‹\nè¯•è¯•è¾“å…¥å¤šè¡Œå†…å®¹\né«˜åº¦ä¼šè‡ªåŠ¨è°ƒæ•´');

// ç¦ç”¨çŠ¶æ€
const disabledValue = ref('è¿™æ˜¯ç¦ç”¨çŠ¶æ€çš„æ–‡æœ¬å†…å®¹ï¼Œæ— æ³•ç¼–è¾‘');

// ä¸åŒè¾¹æ¡†æ ·å¼
const borderValue1 = ref('');
const borderValue2 = ref('');
const borderValue3 = ref('');

// è‡ªå®šä¹‰æ ·å¼
const customValue = ref('');

// ä¸åŒè¾“å…¥æ¨¡å¼
const numericValue = ref('');
const emailValue = ref('');
const searchValue = ref('');

// é”®ç›˜ç¡®è®¤æŒ‰é’®ç±»å‹
const sendValue = ref('');
const searchConfirmValue = ref('');
const nextValue = ref('');

// è‡ªå®šä¹‰å ä½ç¬¦æ ·å¼
const placeholderValue1 = ref('');
const placeholderValue2 = ref('');

// äº‹ä»¶å¤„ç†
const eventValue = ref('');
const eventLogs = ref([]);

// ç»¼åˆç¤ºä¾‹
const comprehensiveValue = ref('è¿™æ˜¯ä¸€ä¸ªç»¼åˆç¤ºä¾‹ï¼Œé›†æˆäº†å­—æ•°ç»Ÿè®¡ã€æ¸…é™¤æŒ‰é’®ã€è‡ªé€‚åº”é«˜åº¦ã€è‡ªå®šä¹‰æ ·å¼ç­‰å¤šç§åŠŸèƒ½ã€‚');

// åŸºç¡€ç”¨æ³•äº‹ä»¶
const onBasicInput = (value) => {
	console.log('åŸºç¡€è¾“å…¥äº‹ä»¶:', value);
};

const onBasicChange = (value) => {
	console.log('åŸºç¡€å˜åŒ–äº‹ä»¶:', value);
};

// æ¸…é™¤äº‹ä»¶
const onClear = () => {
	console.log('æ¸…é™¤äº‹ä»¶è§¦å‘');
	uni.showToast({
		title: 'å†…å®¹å·²æ¸…é™¤',
		icon: 'success',
		duration: 1500
	});
};

// ç¡®è®¤äº‹ä»¶
const onConfirm = (e) => {
	console.log('ç¡®è®¤äº‹ä»¶:', e);
	uni.showToast({
		title: 'ç¡®è®¤æŒ‰é’®è¢«ç‚¹å‡»',
		icon: 'success',
		duration: 1500
	});
};

// äº‹ä»¶å¤„ç†ç›¸å…³æ–¹æ³•
const onFocus = (e) => {
	console.log('èšç„¦äº‹ä»¶:', e);
	addEventLog('ğŸ“ è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹');
};

const onBlur = (e) => {
	console.log('å¤±ç„¦äº‹ä»¶:', e);
	addEventLog('ğŸ”š è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹');
};

const onInputEvent = (value) => {
	addEventLog(`âŒ¨ï¸ è¾“å…¥äº‹ä»¶: "${value.slice(-10)}${value.length > 10 ? '...' : ''}"`);
};

const onChangeEvent = (value) => {
	addEventLog(`ğŸ”„ å˜åŒ–äº‹ä»¶: å†…å®¹é•¿åº¦ ${value.length}`);
};

const onConfirmEvent = (e) => {
	console.log('ç¡®è®¤äº‹ä»¶:', e);
	addEventLog('âœ… ç¡®è®¤æŒ‰é’®è¢«ç‚¹å‡»');
};

const onClearEvent = () => {
	addEventLog('ğŸ—‘ï¸ æ¸…é™¤æŒ‰é’®è¢«ç‚¹å‡»');
};

// ç»¼åˆç¤ºä¾‹äº‹ä»¶
const onComprehensiveInput = (value) => {
	console.log('ç»¼åˆç¤ºä¾‹è¾“å…¥:', value);
};

const onComprehensiveChange = (value) => {
	console.log('ç»¼åˆç¤ºä¾‹å˜åŒ–:', value);
};

const onComprehensiveClear = () => {
	uni.showToast({
		title: 'ç»¼åˆç¤ºä¾‹å†…å®¹å·²æ¸…é™¤',
		icon: 'success',
		duration: 1500
	});
};

// äº‹ä»¶æ—¥å¿—ç›¸å…³æ–¹æ³•
const addEventLog = (message) => {
	const timestamp = new Date().toLocaleTimeString();
	eventLogs.value.unshift(`[${timestamp}] ${message}`);
	// åªä¿ç•™æœ€è¿‘20æ¡æ—¥å¿—
	if (eventLogs.value.length > 20) {
		eventLogs.value = eventLogs.value.slice(0, 20);
	}
};

const clearEventLog = () => {
	eventLogs.value = [];
	uni.showToast({
		title: 'æ—¥å¿—å·²æ¸…ç©º',
		icon: 'success',
		duration: 1000
	});
};
</script>

<style lang="scss" scoped>
.example-container {
	padding: 20rpx;
	background-color: #f8f9fa;
	min-height: 100vh;
}

.header {
	text-align: center;
	margin-bottom: 40rpx;
	padding: 30rpx 20rpx;
	background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
	border-radius: 12rpx;
	color: white;
	
	.title {
		font-size: 36rpx;
		font-weight: bold;
		margin-bottom: 10rpx;
	}
	
	.subtitle {
		font-size: 24rpx;
		opacity: 0.9;
		line-height: 1.4;
	}
}

.section {
	margin-bottom: 40rpx;
	background-color: #fff;
	border-radius: 12rpx;
	padding: 30rpx;
	box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.08);
}

.section-title {
	margin-bottom: 20rpx;
	
	.title-text {
		font-size: 32rpx;
		font-weight: 600;
		color: #2c3e50;
		display: block;
		margin-bottom: 8rpx;
	}
	
	.title-desc {
		font-size: 24rpx;
		color: #7f8c8d;
		line-height: 1.4;
	}
}

.result-box {
	margin-top: 20rpx;
	padding: 20rpx;
	background-color: #f8f9fa;
	border-radius: 8rpx;
	border-left: 4rpx solid #3498db;
	
	.result-label {
		font-size: 24rpx;
		color: #7f8c8d;
	}
	
	.result-value {
		font-size: 28rpx;
		color: #2c3e50;
		font-weight: 500;
	}
}

.border-examples,
.input-mode-examples,
.confirm-examples,
.placeholder-examples {
	display: flex;
	flex-direction: column;
	gap: 20rpx;
}

.border-item,
.mode-item,
.confirm-item,
.placeholder-item {
	display: flex;
	flex-direction: column;
	gap: 12rpx;
}

.border-label,
.mode-label,
.confirm-label,
.placeholder-label {
	font-size: 24rpx;
	color: #7f8c8d;
	font-weight: 500;
}

.event-log {
	margin-top: 20rpx;
	border: 1rpx solid #e9ecef;
	border-radius: 8rpx;
	overflow: hidden;
	
	.log-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: 15rpx 20rpx;
		background-color: #f8f9fa;
		border-bottom: 1rpx solid #e9ecef;
		
		.log-title {
			font-size: 26rpx;
			font-weight: 600;
			color: #2c3e50;
		}
		
		.log-clear {
			font-size: 24rpx;
			color: #e74c3c;
			padding: 8rpx 16rpx;
			border-radius: 4rpx;
			background-color: #fff;
			border: 1rpx solid #e74c3c;
		}
	}
	
	.log-content {
		max-height: 300rpx;
		padding: 20rpx;
		
		.log-item {
			display: block;
			font-size: 22rpx;
			color: #34495e;
			margin-bottom: 8rpx;
			padding: 8rpx 12rpx;
			background-color: #f8f9fa;
			border-radius: 4rpx;
			border-left: 3rpx solid #3498db;
			line-height: 1.4;
		}
		
		.log-empty {
			font-size: 24rpx;
			color: #bdc3c7;
			text-align: center;
			padding: 40rpx 20rpx;
		}
	}
}

.comprehensive-info {
	margin-top: 20rpx;
	display: flex;
	justify-content: space-between;
	padding: 20rpx;
	background-color: #ecf0f1;
	border-radius: 8rpx;
	
	.info-item {
		font-size: 24rpx;
		color: #2c3e50;
		font-weight: 500;
	}
}

/* å“åº”å¼è®¾è®¡ */
@media (min-width: 750rpx) {
	.border-examples,
	.input-mode-examples,
	.confirm-examples,
	.placeholder-examples {
		flex-direction: row;
		gap: 30rpx;
	}
	
	.border-item,
	.mode-item,
	.confirm-item,
	.placeholder-item {
		flex: 1;
	}
}

/* æš—è‰²æ¨¡å¼æ”¯æŒ */
@media (prefers-color-scheme: dark) {
	.example-container {
		background-color: #1a1a1a;
	}
	
	.section {
		background-color: #2d2d2d;
		
		.section-title .title-text {
			color: #ffffff;
		}
		
		.section-title .title-desc {
			color: #aaaaaa;
		}
	}
	
	.result-box {
		background-color: #404040;
		
		.result-value {
			color: #ffffff;
		}
	}
}
</style>
