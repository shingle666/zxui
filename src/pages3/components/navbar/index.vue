<template>
	<view class="navbar-demo">
		<!-- é¡µé¢å¯¼èˆªæ  -->
		<zx-navbar
			title="Navbar ç»„ä»¶ç¤ºä¾‹"
			bg-color="#007AFF"
			:title-style="{ color: '#ffffff' }"
			left-icon="arrow-left"
			left-icon-color="#ffffff"
			right-text="æºç "
			right-icon-color="#ffffff"
			@left-click="goBack"
			@right-click="viewSource"
		/>

		<scroll-view scroll-y class="demo-scroll">
			<!-- åŸºç¡€ç”¨æ³• -->
			<view class="demo-section">
				<view class="demo-section-title">åŸºç¡€ç”¨æ³•</view>
				<view class="demo-section-content">
					<zx-navbar 
						title="åŸºç¡€å¯¼èˆªæ "
						left-text="è¿”å›"
						right-text="æ›´å¤š"
						@left-click="showToast('ç‚¹å‡»äº†è¿”å›')"
						@right-click="showToast('ç‚¹å‡»äº†æ›´å¤š')"
					/>
				</view>
			</view>

			<!-- å‰¯æ ‡é¢˜ -->
			<view class="demo-section">
				<view class="demo-section-title">å‰¯æ ‡é¢˜</view>
				<view class="demo-section-content">
					<zx-navbar 
						title="ä¸»æ ‡é¢˜"
						subtitle="è¿™æ˜¯å‰¯æ ‡é¢˜è¯´æ˜"
						:auto-back="false"
						right-icon="help-circle"
						@right-click="showToast('æŸ¥çœ‹å¸®åŠ©')"
					/>
				</view>
			</view>

			<!-- é€æ˜èƒŒæ™¯ -->
			<view class="demo-section bg-image">
				<view class="demo-section-title">é€æ˜èƒŒæ™¯</view>
				<view class="demo-section-content">
					<zx-navbar 
						title="é€æ˜å¯¼èˆªæ "
						:transparent="true"
						left-icon="arrow-left"
						right-icon="more-horizontal"
						left-icon-color="#ffffff"
						right-icon-color="#ffffff"
						:title-style="{ color: '#ffffff', textShadow: '0 1px 2px rgba(0,0,0,0.5)' }"
						@left-click="showToast('é€æ˜èƒŒæ™¯è¿”å›')"
						@right-click="showToast('é€æ˜èƒŒæ™¯æ›´å¤š')"
					/>
				</view>
			</view>

			<!-- æ²‰æµ¸å¼æ¨¡å¼ -->
			<view class="demo-section">
				<view class="demo-section-title">æ²‰æµ¸å¼æ¨¡å¼</view>
				<view class="demo-section-content">
					<zx-navbar 
						title="æ²‰æµ¸å¼å¯¼èˆªæ "
						:immersive="true"
						:shadow="true"
						left-icon="arrow-left"
						right-icon="search"
						@left-click="showToast('æ²‰æµ¸å¼è¿”å›')"
						@right-click="showToast('æ²‰æµ¸å¼æœç´¢')"
					/>
				</view>
			</view>

			<!-- ä¸»é¢˜æ¨¡å¼ -->
			<view class="demo-section">
				<view class="demo-section-title">ä¸»é¢˜æ¨¡å¼</view>
				<view class="demo-section-content">
					<view class="theme-demo">
						<!-- äº®è‰²ä¸»é¢˜ -->
						<view class="theme-item">
							<text class="theme-label">äº®è‰²ä¸»é¢˜</text>
							<zx-navbar 
								title="Light Theme"
								theme="light"
								bg-color="#ffffff"
								left-icon="sun"
								right-icon="settings"
								@left-click="showToast('äº®è‰²ä¸»é¢˜')"
							/>
						</view>
						
						<!-- æš—è‰²ä¸»é¢˜ -->
						<view class="theme-item">
							<text class="theme-label">æš—è‰²ä¸»é¢˜</text>
							<zx-navbar 
								title="Dark Theme"
								theme="dark"
								bg-color="#1f1f1f"
								left-icon="moon"
								right-icon="settings"
								left-icon-color="#ffffff"
								right-icon-color="#ffffff"
								@left-click="showToast('æš—è‰²ä¸»é¢˜')"
							/>
						</view>
					</view>
				</view>
			</view>

			<!-- åŠ è½½çŠ¶æ€ -->
			<view class="demo-section">
				<view class="demo-section-title">åŠ è½½çŠ¶æ€</view>
				<view class="demo-section-content">
					<zx-navbar 
						title="æ­£åœ¨åŠ è½½..."
						:loading="isLoading"
						left-icon="arrow-left"
						:left-disabled="isLoading"
						right-text="åˆ·æ–°"
						:right-disabled="isLoading"
						@left-click="showToast('è¿”å›è¢«ç¦ç”¨')"
						@right-click="toggleLoading"
					/>
					<view class="demo-actions">
						<button @click="toggleLoading" :disabled="isLoading">
							{{ isLoading ? 'åŠ è½½ä¸­...' : 'åˆ‡æ¢åŠ è½½çŠ¶æ€' }}
						</button>
					</view>
				</view>
			</view>

			<!-- è‡ªå®šä¹‰é¢œè‰² -->
			<view class="demo-section">
				<view class="demo-section-title">è‡ªå®šä¹‰é¢œè‰²</view>
				<view class="demo-section-content">
					<view class="color-demo">
						<zx-navbar 
							title="è“è‰²ä¸»é¢˜"
							bg-color="#007AFF"
							left-icon="arrow-left"
							right-text="å®Œæˆ"
							left-icon-color="#ffffff"
							right-icon-color="#ffffff"
							:title-style="{ color: '#ffffff' }"
							@left-click="showToast('è“è‰²ä¸»é¢˜è¿”å›')"
							@right-click="showToast('è“è‰²ä¸»é¢˜å®Œæˆ')"
						/>
					</view>
					<view class="color-demo">
						<zx-navbar 
							title="ç»¿è‰²ä¸»é¢˜"
							bg-color="#34C759"
							left-icon="arrow-left"
							right-icon="check"
							left-icon-color="#ffffff"
							right-icon-color="#ffffff"
							:title-style="{ color: '#ffffff' }"
							@left-click="showToast('ç»¿è‰²ä¸»é¢˜è¿”å›')"
							@right-click="showToast('ç»¿è‰²ä¸»é¢˜ç¡®è®¤')"
						/>
					</view>
				</view>
			</view>

			<!-- æ¸å˜èƒŒæ™¯ -->
			<view class="demo-section">
				<view class="demo-section-title">æ¸å˜èƒŒæ™¯</view>
				<view class="demo-section-content">
					<view class="gradient-navbar">
						<zx-navbar 
							title="æ¸å˜å¯¼èˆªæ "
							left-icon="arrow-left"
							right-icon="heart"
							left-icon-color="#ffffff"
							right-icon-color="#ffffff"
							:title-style="{ color: '#ffffff' }"
							@left-click="showToast('æ¸å˜è¿”å›')"
							@right-click="showToast('æ¸å˜å–œæ¬¢')"
						/>
					</view>
				</view>
			</view>

			<!-- è‡ªå®šä¹‰æ’æ§½ -->
			<view class="demo-section">
				<view class="demo-section-title">è‡ªå®šä¹‰æ’æ§½</view>
				<view class="demo-section-content">
					<zx-navbar 
						:auto-back="false"
						@left-click="showToast('è‡ªå®šä¹‰å·¦ä¾§')"
						@right-click="showToast('è‡ªå®šä¹‰å³ä¾§')"
					>
						<template #left>
							<view class="custom-left">
								<zx-icon name="home" size="20" color="#007AFF"></zx-icon>
								<text class="custom-text">é¦–é¡µ</text>
							</view>
						</template>
						<template #center>
							<view class="custom-center">
								<view class="logo">LOGO</view>
								<text class="brand-name">å“ç‰Œåç§°</text>
							</view>
						</template>
						<template #right>
							<view class="custom-right">
								<zx-icon name="search" size="20" color="#333" class="icon-item"></zx-icon>
								<view class="badge-container">
									<zx-icon name="shopping-cart" size="20" color="#333"></zx-icon>
									<text class="badge">{{ cartCount }}</text>
								</view>
							</view>
						</template>
					</zx-navbar>
				</view>
			</view>

			<!-- å›ºå®šåœ¨é¡¶éƒ¨ -->
			<view class="demo-section">
				<view class="demo-section-title">å›ºå®šåœ¨é¡¶éƒ¨</view>
				<view class="demo-section-content">
					<view class="fixed-demo">
						<text class="demo-tip">ä¸‹é¢çš„å¯¼èˆªæ å·²å›ºå®šåœ¨é¡¶éƒ¨</text>
						<button @click="toggleFixed">
							{{ isFixed ? 'å–æ¶ˆå›ºå®š' : 'å›ºå®šåœ¨é¡¶éƒ¨' }}
						</button>
					</view>
					<zx-navbar 
						v-if="isFixed"
						title="å›ºå®šå¯¼èˆªæ "
						:fixed="true"
						:shadow="true"
						bg-color="#FF3B30"
						left-icon="arrow-left"
						right-icon="share"
						left-icon-color="#ffffff"
						right-icon-color="#ffffff"
						:title-style="{ color: '#ffffff' }"
						@left-click="showToast('å›ºå®šå¯¼èˆªæ è¿”å›')"
						@right-click="showToast('å›ºå®šå¯¼èˆªæ åˆ†äº«')"
					/>
				</view>
			</view>

			<!-- åº•éƒ¨è¾¹æ¡† -->
			<view class="demo-section">
				<view class="demo-section-title">åº•éƒ¨è¾¹æ¡†</view>
				<view class="demo-section-content">
					<zx-navbar 
						title="å¸¦è¾¹æ¡†å¯¼èˆªæ "
						:border="true"
						border-color="#e0e0e0"
						left-icon="arrow-left"
						right-text="ç¼–è¾‘"
						@left-click="showToast('è¾¹æ¡†è¿”å›')"
						@right-click="showToast('è¾¹æ¡†ç¼–è¾‘')"
					/>
				</view>
			</view>

			<!-- é«˜åº¦è‡ªå®šä¹‰ -->
			<view class="demo-section">
				<view class="demo-section-title">è‡ªå®šä¹‰é«˜åº¦</view>
				<view class="demo-section-content">
					<view class="height-demo">
						<text class="demo-label">æ ‡å‡†é«˜åº¦ (44px)</text>
						<zx-navbar 
							title="æ ‡å‡†é«˜åº¦"
							height="44px"
							left-icon="arrow-left"
							@left-click="showToast('æ ‡å‡†é«˜åº¦')"
						/>
					</view>
					<view class="height-demo">
						<text class="demo-label">è¾ƒé«˜ (60px)</text>
						<zx-navbar 
							title="è¾ƒé«˜å¯¼èˆªæ "
							subtitle="60px é«˜åº¦"
							height="60px"
							bg-color="#f8f8f8"
							left-icon="arrow-left"
							@left-click="showToast('è¾ƒé«˜å¯¼èˆªæ ')"
						/>
					</view>
				</view>
			</view>

			<!-- äº¤äº’æ¼”ç¤º -->
			<view class="demo-section">
				<view class="demo-section-title">äº¤äº’æ¼”ç¤º</view>
				<view class="demo-section-content">
					<view class="interaction-demo">
						<zx-navbar 
							:title="dynamicTitle"
							:subtitle="dynamicSubtitle"
							:bg-color="dynamicBgColor"
							:loading="interactionLoading"
							left-icon="arrow-left"
							right-text="æ“ä½œ"
							:left-disabled="interactionLoading"
							@left-click="showToast('äº¤äº’è¿”å›')"
							@right-click="performAction"
						/>
						<view class="demo-controls">
							<button @click="changeTitle">æ›´æ”¹æ ‡é¢˜</button>
							<button @click="changeColor">æ›´æ”¹é¢œè‰²</button>
							<button @click="performAction">æ‰§è¡Œæ“ä½œ</button>
						</view>
					</view>
				</view>
			</view>

			<!-- åŠŸèƒ½æ€»ç»“ -->
			<view class="demo-section last">
				<view class="demo-section-title">åŠŸèƒ½ç‰¹æ€§</view>
				<view class="demo-section-content">
					<view class="feature-list">
						<view class="feature-item" v-for="feature in features" :key="feature.title">
							<view class="feature-icon">{{ feature.icon }}</view>
							<view class="feature-content">
								<text class="feature-title">{{ feature.title }}</text>
								<text class="feature-desc">{{ feature.desc }}</text>
							</view>
						</view>
					</view>
				</view>
			</view>
		</scroll-view>
	</view>
</template>

<script setup>
import { ref } from 'vue';

// å“åº”å¼æ•°æ®
const isLoading = ref(false);
const isFixed = ref(false);
const cartCount = ref(5);
const interactionLoading = ref(false);

// åŠ¨æ€æ•°æ®
const dynamicTitle = ref('åŠ¨æ€æ ‡é¢˜');
const dynamicSubtitle = ref('å¯ä»¥åŠ¨æ€æ›´æ–°');
const dynamicBgColor = ref('#ffffff');

// åŠŸèƒ½ç‰¹æ€§åˆ—è¡¨
const features = ref([
	{
		icon: 'ğŸ¨',
		title: 'ä¸»é¢˜æ”¯æŒ',
		desc: 'æ”¯æŒäº®è‰²/æš—è‰²/è‡ªåŠ¨ä¸»é¢˜æ¨¡å¼'
	},
	{
		icon: 'âœ¨',
		title: 'æ²‰æµ¸å¼',
		desc: 'æ”¯æŒé€æ˜èƒŒæ™¯å’Œæ¯›ç»ç’ƒæ•ˆæœ'
	},
	{
		icon: 'ğŸ“±',
		title: 'å“åº”å¼',
		desc: 'é€‚é…ä¸åŒå±å¹•å°ºå¯¸å’Œè®¾å¤‡'
	},
	{
		icon: 'ğŸ”§',
		title: 'é«˜åº¦å®šåˆ¶',
		desc: 'ä¸°å¯Œçš„é…ç½®é€‰é¡¹å’Œæ’æ§½æ”¯æŒ'
	},
	{
		icon: 'â™¿',
		title: 'æ— éšœç¢',
		desc: 'å®Œæ•´çš„æ— éšœç¢è®¿é—®æ”¯æŒ'
	},
	{
		icon: 'âš¡',
		title: 'é«˜æ€§èƒ½',
		desc: 'ä½¿ç”¨ Composition API ä¼˜åŒ–æ€§èƒ½'
	}
]);

// æ–¹æ³•
const showToast = (message) => {
	uni.showToast({
		title: message,
		icon: 'none',
		duration: 1500
	});
};

const goBack = () => {
	uni.navigateBack({
		fail: () => {
			uni.reLaunch({
				url: '/pages/index/index'
			});
		}
	});
};

const viewSource = () => {
	uni.showModal({
		title: 'æŸ¥çœ‹æºç ',
		content: 'å¯ä»¥åœ¨ GitHub ä¸ŠæŸ¥çœ‹å®Œæ•´çš„ç»„ä»¶æºç ',
		confirmText: 'å‰å¾€',
		success: (res) => {
			if (res.confirm) {
				// è¿™é‡Œå¯ä»¥æ·»åŠ è·³è½¬åˆ°æºç é¡µé¢çš„é€»è¾‘
				showToast('å‡†å¤‡è·³è½¬åˆ°æºç é¡µé¢');
			}
		}
	});
};

const toggleLoading = () => {
	isLoading.value = !isLoading.value;
	setTimeout(() => {
		if (isLoading.value) {
			isLoading.value = false;
			showToast('åŠ è½½å®Œæˆ');
		}
	}, 2000);
};

const toggleFixed = () => {
	isFixed.value = !isFixed.value;
	if (isFixed.value) {
		showToast('å¯¼èˆªæ å·²å›ºå®šåœ¨é¡¶éƒ¨');
	} else {
		showToast('å¯¼èˆªæ å›ºå®šå·²å–æ¶ˆ');
	}
};

const changeTitle = () => {
	const titles = ['åŠ¨æ€æ ‡é¢˜', 'å·²æ›´æ–°æ ‡é¢˜', 'æ–°æ ‡é¢˜å†…å®¹', 'å®æ—¶æ›´æ–°'];
	const subtitles = ['å¯ä»¥åŠ¨æ€æ›´æ–°', 'æ ‡é¢˜å·²å˜æ›´', 'æ”¯æŒå®æ—¶ä¿®æ”¹', 'å“åº”å¼æ›´æ–°'];
	const index = Math.floor(Math.random() * titles.length);
	dynamicTitle.value = titles[index];
	dynamicSubtitle.value = subtitles[index];
};

const changeColor = () => {
	const colors = ['#ffffff', '#007AFF', '#34C759', '#FF3B30', '#FF9500', '#5856D6'];
	const index = Math.floor(Math.random() * colors.length);
	dynamicBgColor.value = colors[index];
};

const performAction = () => {
	interactionLoading.value = true;
	setTimeout(() => {
		interactionLoading.value = false;
		showToast('æ“ä½œæ‰§è¡Œå®Œæˆ');
	}, 1500);
};
</script>

<style lang="scss" scoped>
.navbar-demo {
	background-color: #f5f5f5;
	min-height: 100vh;
}

.demo-scroll {
	height: calc(100vh - 88px);
}

// Demo åŒºå—æ ·å¼
.demo-section {
	margin: 30rpx;
	background-color: #ffffff;
	border-radius: 16rpx;
	overflow: hidden;
	box-shadow: 0 2px 12px rgba(0, 0, 0, 0.04);
	
	&.last {
		margin-bottom: 60rpx;
	}
	
	// é€æ˜èƒŒæ™¯æ¼”ç¤ºåŒºåŸŸ
	&.bg-image {
		background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		
		.demo-section-title {
			background-color: rgba(255, 255, 255, 0.9);
		}
		
		.demo-section-content {
			background: transparent;
		}
	}
}

.demo-section-title {
	padding: 30rpx;
	font-size: 32rpx;
	font-weight: 600;
	color: #333333;
	background-color: #fafafa;
	border-bottom: 1px solid #eeeeee;
}

.demo-section-content {
	padding: 30rpx;
}

// ä¸»é¢˜æ¼”ç¤º
.theme-demo {
	.theme-item {
		margin-bottom: 30rpx;
		
		&:last-child {
			margin-bottom: 0;
		}
	}
	
	.theme-label {
		display: block;
		font-size: 26rpx;
		color: #666666;
		margin-bottom: 20rpx;
	}
}

// é¢œè‰²æ¼”ç¤º
.color-demo {
	margin-bottom: 30rpx;
	
	&:last-child {
		margin-bottom: 0;
	}
}

// æ¸å˜å¯¼èˆªæ 
.gradient-navbar {
	background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
	border-radius: 12rpx;
	overflow: hidden;
}

// è‡ªå®šä¹‰æ’æ§½æ ·å¼
.custom-left {
	display: flex;
	align-items: center;
	gap: 8rpx;
}

.custom-text {
	font-size: 28rpx;
	color: #007AFF;
}

.custom-center {
	display: flex;
	align-items: center;
	gap: 12rpx;
}

.logo {
	width: 60rpx;
	height: 60rpx;
	background: linear-gradient(45deg, #007AFF, #34C759);
	border-radius: 50%;
	display: flex;
	align-items: center;
	justify-content: center;
	color: #ffffff;
	font-size: 20rpx;
	font-weight: bold;
}

.brand-name {
	font-size: 32rpx;
	font-weight: 600;
	color: #333333;
}

.custom-right {
	display: flex;
	align-items: center;
	gap: 24rpx;
}

.icon-item {
	margin-right: 24rpx;
}

// ç®€å•çš„å¾½ç« å®ç°
.badge-container {
	position: relative;
	
	.badge {
		position: absolute;
		top: -8rpx;
		right: -8rpx;
		background-color: #ff4757;
		color: #ffffff;
		font-size: 20rpx;
		padding: 4rpx 8rpx;
		border-radius: 20rpx;
		min-width: 32rpx;
		text-align: center;
		line-height: 1;
	}
}

// æ¼”ç¤ºæ“ä½œæŒ‰é’®
.demo-actions {
	padding: 30rpx;
	text-align: center;
	
	button {
		padding: 20rpx 40rpx;
		font-size: 28rpx;
		border-radius: 8rpx;
		border: 1px solid #007AFF;
		color: #007AFF;
		background-color: transparent;
		
		&:active {
			background-color: #007AFF;
			color: #ffffff;
		}
		
		&:disabled {
			opacity: 0.5;
			pointer-events: none;
		}
	}
}

// å›ºå®šæ¼”ç¤º
.fixed-demo {
	padding: 30rpx;
	text-align: center;
	
	.demo-tip {
		display: block;
		font-size: 26rpx;
		color: #666666;
		margin-bottom: 20rpx;
	}
	
	button {
		padding: 16rpx 32rpx;
		font-size: 26rpx;
		border-radius: 6rpx;
		border: 1px solid #FF3B30;
		color: #FF3B30;
		background-color: transparent;
		
		&:active {
			background-color: #FF3B30;
			color: #ffffff;
		}
	}
}

// é«˜åº¦æ¼”ç¤º
.height-demo {
	margin-bottom: 30rpx;
	
	&:last-child {
		margin-bottom: 0;
	}
	
	.demo-label {
		display: block;
		font-size: 26rpx;
		color: #666666;
		margin-bottom: 20rpx;
	}
}

// äº¤äº’æ¼”ç¤º
.interaction-demo {
	.demo-controls {
		padding: 30rpx;
		display: flex;
		justify-content: space-around;
		gap: 20rpx;
		
		button {
			flex: 1;
			padding: 16rpx 20rpx;
			font-size: 24rpx;
			border-radius: 6rpx;
			border: 1px solid #007AFF;
			color: #007AFF;
			background-color: transparent;
			
			&:active {
				background-color: #007AFF;
				color: #ffffff;
			}
		}
	}
}

// åŠŸèƒ½ç‰¹æ€§åˆ—è¡¨
.feature-list {
	padding: 30rpx;
}

.feature-item {
	display: flex;
	align-items: flex-start;
	margin-bottom: 30rpx;
	
	&:last-child {
		margin-bottom: 0;
	}
}

.feature-icon {
	width: 60rpx;
	height: 60rpx;
	font-size: 30rpx;
	display: flex;
	align-items: center;
	justify-content: center;
	background-color: #f8f8f8;
	border-radius: 50%;
	margin-right: 24rpx;
	flex-shrink: 0;
}

.feature-content {
	flex: 1;
}

.feature-title {
	display: block;
	font-size: 30rpx;
	font-weight: 600;
	color: #333333;
	margin-bottom: 8rpx;
}

.feature-desc {
	display: block;
	font-size: 26rpx;
	color: #666666;
	line-height: 1.4;
}
</style>
